

{% extends 'base.html' %}

{% load  static%}

{% block content %}
    <section class="records">
<!--        <input type="button" value="select table" onclick="selectElementContents( document.getElementById('tableId') );">-->

        <div class="container">
            <div class="record-content">
            <div class="table-record mb-2 records-filter d-flex align-items-center">
                <div class="row w-100">
                    <div class="col-md-2">
                         <div class="dropdown">
                  <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                    Select
                  </a>

                  <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                    <li><a class="dropdown-item" href="#">Action</a></li>
                    <li><a class="dropdown-item" href="#">Another action</a></li>
                    <li><a class="dropdown-item" href="#">Something else here</a></li>
                  </ul>
                </div>
                    </div>
                    <div class="col-md-1">
                    <div class="dropdown">
                  <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                    =
                  </a>

                  <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                    <li><a class="dropdown-item" href="#"></a></li>
                    <li><a class="dropdown-item" href="#"><</a></li>
                    <li><a class="dropdown-item" href="#">=</a></li>
                  </ul>
                </div>
                    </div>
                    <div class="col-md-3">
                    <input required="" type="text"  name="" class="form-control formInput" placeholder="Enter here">
                    </div>
                    <div class="col-md-1 pt-1">
                        <a href="#">
                            <img src="{% static 'imgs/delete.png' %}" alt="" height="20"/>
                        </a>
                    </div>
                    <div class="col-md-5 d-flex align-items-center justify-content-end">
                     <div class="dt-buttons">
                       <button class="dt-button buttons-pdf buttons-html5" type="button"><span>Export</span></button>
                     </div>
                        <div class="clr"></div>
                    </div>
                </div>
            </div>
                <div  class="table-record">
<!--                    <div class="table-record-actions">-->
<!--                        <button class="hvr-sweep-orange-bottom theme-btn bg-grey white" id="download-button">Excel</button>-->
<!--                        <button class="hvr-sweep-orange-bottom theme-btn bg-grey white" onclick="generate()">PDF</button>-->
<!--                        <button class="hvr-sweep-orange-bottom theme-btn bg-grey white">Print</button>-->
<!--                        <div class="d-flex search-tbl">-->
<!--                            <form>-->
<!--                                <input type="text" placeholder="Search.....">-->
<!--                                <button type="submit"><i class="bi bi-search"></i></button>-->
<!--                            </form>-->
<!--                        </div>-->
<!--                    </div>-->
                    <div class="tbl-wrapper-content">
                        <table class="table theme-tbl" id="AllRecords">
                            <thead>
                            <tr>
                                <th>Company Name</th>
                                <th>Non Production Material</th>
                                <th>Production Material</th>
                                <th>Oem's</th>
                                <th>Current Supplier</th>
                                <th>Technology & Location</th>
                                <th>Responded</th>
                                <th>Emailed</th>
                                <th>Action</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for rec in page_obj %}
                                <tr>
                                    <td>
                                        <a href="#" class="text-decoration-none" data-bs-toggle="modal" data-bs-target="#favouriteList">
                                        <img src="{% static 'imgs/favorite.png' %}" alt="" height="15" class="mb-1"/>
                                        </a>
                                        {{rec.general_contant_info.company_name}}</td>
                                    <td>
                                        {% for obj in npmValues %}
                                            {% if obj.abc_corporation_id == rec.id%}

                                                {{obj.npm_value}} > {{obj.npm_value_category1}} > {{obj.npm_value_category2}} |
                                            {% endif %}
                                        {% endfor %}
                                    </td>
                                    <td>
                                        {% for obj in pmValues %}
                                            {% if obj.abc_corporation_id == rec.id%}

                                                {{obj.pm_value}} > {{obj.pm_value_category1}} |
                                            {% endif %}
                                        {% endfor %}
                                    </td>
                                    <td>{{rec.production_capabilities.oems.name}}</td>
                                    <td>{{rec.production_capabilities.abc_supplier}}</td>
                                    <td>{{rec.production_capabilities.record_per_naLocation.name}}</td>
                                    <td> {% if rec.response == 1 %} Yes {% else %} No {%endif %}</td>
                                    <td> {{rec.emailed}} Times</td>
                                    <td><a href="{% url 'detailRecord' rec.id %}"><i class="bi bi-eye-fill"></i></a></td>
                                </tr>
                            {% endfor %}

                            </tbody>
                        </table>
                    </div>
                </div>



<!--                {% if page_obj.paginator.num_pages > 1 %}-->
<!--                <div class="theme-pagination">-->
<!--                    <nav aria-label="Page navigation example">-->
<!--                        <ul class="pagination">-->

<!--                            {% if page_obj.has_previous %}-->
<!--                                <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}">Previous</a></li>-->
<!--                            {% endif %}-->

<!--                            {% for page_num in page_obj.paginator.page_range %}-->
<!--                                {% if page_num == page_obj.number %}-->
<!--                                    <li class="page-item"><a class="page-link" href="#">{{page_num}}</a></li>-->

<!--                                {% endif %}-->
<!--                            {%endfor%}-->

<!--                            {% if page_obj.has_next %}-->
<!--                                <li class="page-item"><a class="page-link" href="?page={{ page_obj.next_page_number }}"><span>&raquo;</span></a></li>-->
<!--                            {% endif %}-->



<!--                        </ul>-->
<!--                    </nav>-->
<!--                </div>-->
<!--                {% endif %}-->
            </div>
        </div>
    </section>

    <!-- favourite Modal -->
    <div aria-hidden="true" aria-labelledby="staticBackdropLabel" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" id="favouriteList" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-body">
                    <div class="closeModalHeader">
                        <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
                    </div>
                    <div class="modalBodyContent">
                            <div class="mb-3">
                                <label for="" class="form-label">Non Production Material</label>
                                <input type="text" required name="" class="form-control formInput" id="" aria-describedby="emailHelp">
                            </div>
                            <div class="mb-3">
                                <label for="" class="form-label">Production Material</label>
                                <input type="text" required name="" class="form-control formInput" id="">
                            </div>
                        <div class="mb-3">
                                <label for="" class="form-label">Oem's</label>
                                <input type="text" required name="" class="form-control formInput" id="">
                            </div>

                        <div class="dt-buttons">
                       <button class="dt-button buttons-pdf buttons-html5" type="button"><span>ADD</span></button>
                     </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.6/jspdf.plugin.autotable.min.js"></script>

{% endblock %}

